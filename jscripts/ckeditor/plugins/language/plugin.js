'use strict';(function(){var allowedContent='span[!lang,!dir]',requiredContent='span[lang,dir]';CKEDITOR.plugins.add('language',{requires:'menubutton',lang:'ca,cs,cy,el,en,en-gb,es,fi,hu,ja,km,nb,nl,no,pt,ru,sv,uk,zh,zh-cn',icons:'language',hidpi:true,init:function(editor){var languagesConfigStrings=(editor.config.language_list||['ar:Arabic:rtl','fr:French','es:Spanish']),plugin=this,lang=editor.lang.language,items={},parts,curLanguageId,languageButtonId,i;editor.addCommand('language',{allowedContent:allowedContent,requiredContent:requiredContent,contextSensitive:true,exec:function(editor,languageId){var item=items['language_'+languageId];if(item)
editor[item.style.checkActive(editor.elementPath())?'removeStyle':'applyStyle'](item.style);},refresh:function(editor,path){this.setState(plugin.getCurrentLangElement(editor)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);}});for(i=0;i<languagesConfigStrings.length;i++){parts=languagesConfigStrings[i].split(':');curLanguageId=parts[0];languageButtonId='language_'+curLanguageId;items[languageButtonId]={label:parts[1],langId:curLanguageId,group:'language',order:i,ltr:(''+parts[2]).toLowerCase()!='rtl',onClick:function(){editor.execCommand('language',this.langId);},role:'menuitemcheckbox'};items[languageButtonId].style=new CKEDITOR.style({element:'span',attributes:{lang:curLanguageId,dir:items[languageButtonId].ltr?'ltr':'rtl'}});}
items.language_remove={label:lang.remove,group:'language_remove',state:CKEDITOR.TRISTATE_DISABLED,order:items.length,onClick:function(){var currentLanguagedElement=plugin.getCurrentLangElement(editor);if(currentLanguagedElement)
editor.execCommand('language',currentLanguagedElement.getAttribute('lang'));}};editor.addMenuGroup('language',1);editor.addMenuGroup('language_remove');editor.addMenuItems(items);editor.ui.add('Language',CKEDITOR.UI_MENUBUTTON,{label:lang.button,allowedContent:allowedContent,requiredContent:requiredContent,toolbar:'bidi,30',command:'language',onMenu:function(){var activeItems={},currentLanguagedElement=plugin.getCurrentLangElement(editor);for(var prop in items)
activeItems[prop]=CKEDITOR.TRISTATE_OFF;activeItems.language_remove=currentLanguagedElement?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;if(currentLanguagedElement)
activeItems['language_'+currentLanguagedElement.getAttribute('lang')]=CKEDITOR.TRISTATE_ON;return activeItems;}});},getCurrentLangElement:function(editor){var elementPath=editor.elementPath(),activePath=elementPath&&elementPath.elements,pathMember,ret;if(elementPath){for(var i=0;i<activePath.length;i++){pathMember=activePath[i];if(!ret&&pathMember.getName()=='span'&&pathMember.hasAttribute('dir')&&pathMember.hasAttribute('lang'))
ret=pathMember;}}
return ret;}});})();